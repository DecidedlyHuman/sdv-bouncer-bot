# Setting up Bouncer for your own use

Bouncer was originally written specifically for the Stardew Valley Discord server, and thus was designed primarily with that server's needs in mind. However, if you wish to host a version yourself, here is how to set up the configuration files to do so.

Keep in mind that since the bot was not designed to be run by others, there are some adjustments that will need to be made. The bot has the phrase "Stardew Valley" hardcoded in several places, such as the DM messages sent to users. The bot may not work properly, or may even crash if you do not have channels set up in the way it expects.

If you are going to run the bot on a Debian-based server (Debian, Raspbian, Ubuntu, any system with apt-get), you can simply run the `setup.sh` script. This will install the necessary packages and Python libraries as needed, and will generate the `config.json` configuration file.

If you're running it on a system with a bash shell but without apt-get, you're welcome to edit any line with `apt` in the script and replace with your own package manager (brew, pacman, whatever Fedora uses, etc.). In the future, this will hopefully be made more generic.

If you can't/don't want to run the setup script, you need to have the following packages installed:

- Python 3.6+
- Python Pip
- SQLite 3
- Python Virtualenv (optional, but recommended)

The necessary Python libraries are listed in `requirements.txt`. If pip is installed, you can simply run `python3 -m pip install -r requirements.txt` to install.

A number of private configuration settings are defined and imported in the `config.json` file. This will be autogenerated if you run the `setup.sh` script, but you will still need to fill out some settings. The file itself is structured like so:

```javascript
{
    "discord": "YOUR DISCORD TOKEN HERE",
    "debug": "False", // Whether this is a debugging instance. Should be "True" or "False"
    // Settings for where the bot can be controlled, and where to post items
    "channels": {
        "listening": [1234567890], // A list of channel ID's for the bot to listen in. The '[]' must be there
        "log": 1234567890, // An ID for the channel to post logs of warnings, bans, etc.
        "syslog": 1234567890 // An ID for the channel to post server changes, such as users joining, leaving, etc.
    },
    "roles": [1234567890], // List of role IDs that the bot will obey. Again, the '[]' are required.
    "owner": 1234567890, // Bot owner ID
    "DM": {
        "ban": "False", // Whether to DM a user their ban log message
        "warn": "False" // Whether to DM a user their warn log message
    },
    // Users will be given the specified role if they react with the given emoji on the specified message
    // This can be an extra level of security if without the given role, the user has no server read/write access
    "gatekeeper": {
        "role": 1234567890, // ID of role to give to users when they react to the specified message
        "message": 1234567890, // ID of message for the bot to watch for reactions
        "emoji": "crown" // The emoji name of the monitored reaction
    },
    "censor": {
        "regex": ["hello world"], // Blacklisted phrases to censor, as regex
        "notify_chan": 1234657890 // ID of channel where censor violations should notify admins
    }
}
```

Note that all IDs need to be ints and not strings.

This file should be kept private, as it contains the bot's user token. It should be placed into a `private` folder, which by default will be ignored by git.

The path to your database should be specifed in `config.py` as the `DATABASE_PATH` variable.
